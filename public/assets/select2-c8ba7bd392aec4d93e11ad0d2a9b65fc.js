/*
 Copyright 2012 Igor Vaynberg
 
 Version: @@ver@@ Timestamp: @@timestamp@@

 Licensed under the Apache License, Version 2.0 (the "License"); you may not use this work except in
 compliance with the License. You may obtain a copy of the License in the LICENSE file, or at:

 http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software distributed under the License is
 distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and limitations under the License.
 */
(function(a,b){function g(a,b){var c=0,d=b.length,e;if(typeof a=="undefined")return-1;if(a.constructor===String){for(;c<d;c+=1)if(a.localeCompare(b[c])===0)return c}else for(;c<d;c+=1){e=b[c];if(e.constructor===String){if(e.localeCompare(a)===0)return c}else if(e===a)return c}return-1}function h(a,c){return a===c?!0:a===b||c===b?!1:a===null||c===null?!1:a.constructor===String?a.localeCompare(c)===0:c.constructor===String?c.localeCompare(a)===0:!1}function i(b,c){var d,e,f;if(b===null||b.length<1)return[];d=b.split(c);for(e=0,f=d.length;e<f;e+=1)d[e]=a.trim(d[e]);return d}function j(a){return a.outerWidth()-a.width()}function k(a){a.bind("keydown",function(){a.data("keyup-change-value",a.val())}),a.bind("keyup",function(){a.val()!==a.data("keyup-change-value")&&a.trigger("keyup-change")})}function l(c){c.bind("mousemove",function(c){var d=a(document).data("select2-lastpos");(d===b||d.x!==c.pageX||d.y!==c.pageY)&&a(c.target).trigger("mousemove-filtered",c)})}function m(a,b){var c;return function(){window.clearTimeout(c),c=window.setTimeout(b,a)}}function n(a,b){var c=m(a,function(a){b.trigger("scroll-debounced",a)});b.bind("scroll",function(a){g(a.target,b.get())>=0&&c(a)})}function o(a){a.preventDefault(),a.stopPropagation()}function p(b){var c,d;return c=a("<div></div>").css({position:"absolute",left:"-1000px",top:"-1000px",display:"none",fontSize:b.css("fontSize"),fontFamily:b.css("fontFamily"),fontStyle:b.css("fontStyle"),fontWeight:b.css("fontWeight"),letterSpacing:b.css("letterSpacing"),textTransform:b.css("textTransform"),whiteSpace:"nowrap"}),c.text(b.val()),a("body").append(c),d=c.width(),c.remove(),d}function q(b){var c,d=0,e=null,f=b.quietMillis||100;return function(g){window.clearTimeout(c),c=window.setTimeout(function(){d+=1;var c=d,f=b.data,h=b.transport||a.ajax;f=f.call(this,g.term,g.page,g.context),null!==e&&e.abort(),e=h.call(null,{url:b.url,dataType:b.dataType,data:f,success:function(a){if(c<d)return;var e=b.results(a,g.page);self.context=e.context,g.callback(e)}})},f)}}function r(b){var c=b,d=function(a){return""+a.text};return a.isArray(c)||(d=c.text,a.isFunction(d)||(d=function(a){return a[c.text]}),c=c.results),function(b){var e=b.term,f={};if(e===""){b.callback({results:c});return}f.results=a(c).filter(function(){return b.matcher(e,d(this))}).get(),b.callback(f)}}function s(c){return a.isFunction(c)?c:function(d){var e=d.term,f={results:[]};a(c).each(function(){var a=this.text!==b,c=a?this.text:this;(e===""||d.matcher(e,c))&&f.results.push(a?this:{id:this,text:this})}),d.callback(f)}}function t(b,c){var d=function(){};return d.prototype=new b,d.prototype.constructor=d,d.prototype.parent=b.prototype,d.prototype=a.extend(d.prototype,c),d}"use strict";if(window.Select2!==b)return;var c,d,e,f;c={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(a){a=a.which?a.which:a;switch(a){case c.LEFT:case c.RIGHT:case c.UP:case c.DOWN:return!0}return!1},isControl:function(a){a=a.which?a.which:a;switch(a){case c.SHIFT:case c.CTRL:case c.ALT:return!0}return!1},isFunctionKey:function(a){return a=a.which?a.which:a,a>=112&&a<=123}},a(document).delegate("*","mousemove",function(b){a(document).data("select2-lastpos",{x:b.pageX,y:b.pageY})}),a(document).ready(function(){a(document).delegate("*","mousedown focusin",function(b){var c=a(b.target).closest("div.select2-container").get(0);a(document).find("div.select2-container-active").each(function(){this!==c&&a(this).data("select2").blur()})})}),d=t(Object,{bind:function(a){var b=this;return function(){a.apply(b,arguments)}},init:function(c){var d,e,f=".select2-results";this.opts=c=this.prepareOpts(c),this.id=c.id,c.element.data("select2")!==b&&c.element.data("select2")!==null&&this.destroy(),this.enabled=!0,this.container=this.createContainer(),c.element.attr("class")!==b&&this.container.addClass(c.element.attr("class")),this.opts.element.data("select2",this).hide().after(this.container),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),this.results=d=this.container.find(f),this.search=e=this.container.find("input[type=text]"),this.resultsPage=0,this.context=null,this.initContainer(),l(this.results),this.container.delegate(f,"mousemove-filtered",this.bind(this.highlightUnderEvent)),n(80,this.results),this.container.delegate(f,"scroll-debounced",this.bind(this.loadMoreIfNeeded)),a.fn.mousewheel&&d.mousewheel(function(a,b,c,e){var f=d.scrollTop(),g;e>0&&f-e<=0?(d.scrollTop(0),o(a)):e<0&&d.get(0).scrollHeight-d.scrollTop()+e<=d.height()&&(d.scrollTop(d.get(0).scrollHeight-d.height()),o(a))}),k(e),e.bind("keyup-change",this.bind(this.updateResults)),e.bind("focus",function(){e.addClass("select2-focused")}),e.bind("blur",function(){e.removeClass("select2-focused")}),this.container.delegate(f,"click",this.bind(function(b){a(b.target).closest(".select2-result:not(.select2-disabled)").length>0?(this.highlightUnderEvent(b),this.selectHighlighted(b)):(o(b),this.focusSearch())})),a.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),c.element.is(":disabled")&&this.disable()},destroy:function(){var a=this.opts.element.data("select2");a!==b&&(a.container.remove(),a.opts.element.removeData("select2").unbind(".select2").show())},prepareOpts:function(c){var d,e,f;d=c.element,d.get(0).tagName.toLowerCase()==="select"&&(this.select=e=c.element),e&&a.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in c)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}),c=a.extend({},{formatResult:function(a){return a.text},formatSelection:function(a){return a.text},formatNoMatches:function(){return"No matches found"},formatInputTooShort:function(a,b){return"Please enter "+(b-a.length)+" more characters"},minimumResultsForSearch:0,minimumInputLength:0,id:function(a){return a.id},matcher:function(a,b){return b.toUpperCase().indexOf(a.toUpperCase())>=0}},c),typeof c.id!="function"&&(f=c.id,c.id=function(a){return a[f]}),e?(c.query=this.bind(function(c){var e={results:[],more:!1},f=c.term,g=this.getPlaceholder();d.find("option").each(function(d){var h=a(this),i=h.text();if(d===0&&g!==b&&i==="")return!0;c.matcher(f,i)&&e.results.push({id:h.attr("value"),text:i})}),c.callback(e)}),c.id=function(a){return a.id}):"query"in c||("ajax"in c?c.query=q(c.ajax):"data"in c?c.query=r(c.data):"tags"in c&&(c.query=s(c.tags),c.createSearchChoice=function(a){return{id:a,text:a}},c.initSelection=function(b){var c=[];return a(i(b.val(),",")).each(function(){c.push({id:this,text:this})}),c}));if(typeof c.query!="function")throw"query function not defined for Select2 "+c.element.attr("id");return c},monitorSource:function(){this.opts.element.bind("change.select2",this.bind(function(a){this.opts.element.data("select2-change-triggered")!==!0&&this.initSelection()}))},triggerChange:function(){this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger("change"),this.opts.element.data("select2-change-triggered",!1)},enable:function(){if(this.enabled)return;this.enabled=!0,this.container.removeClass("select2-container-disabled")},disable:function(){if(!this.enabled)return;this.close(),this.enabled=!1,this.container.addClass("select2-container-disabled")},opened:function(){return this.container.hasClass("select2-dropdown-open")},open:function(){if(this.opened())return;this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.updateResults(!0),this.dropdown.show(),this.ensureHighlightVisible(),this.focusSearch()},close:function(){if(!this.opened())return;this.dropdown.hide(),this.container.removeClass("select2-dropdown-open"),this.results.empty(),this.clearSearch()},clearSearch:function(){},ensureHighlightVisible:function(){var b=this.results,c,d,e,f,g,h,i;c=b.children(".select2-result"),d=this.highlight();if(d<0)return;e=a(c[d]),f=e.offset().top+e.outerHeight(),d===c.length-1&&(i=b.find("li.select2-more-results"),i.length>0&&(f=i.offset().top+i.outerHeight())),g=b.offset().top+b.outerHeight(),f>g&&b.scrollTop(b.scrollTop()+(f-g)),h=e.offset().top-b.offset().top,h<0&&b.scrollTop(b.scrollTop()+h)},moveHighlight:function(b){var c=this.results.children(".select2-result"),d=this.highlight();while(d>-1&&d<c.length){d+=b;if(!a(c[d]).hasClass("select2-disabled")){this.highlight(d);break}}},highlight:function(b){var c=this.results.children(".select2-result");if(arguments.length===0)return g(c.filter(".select2-highlighted")[0],c.get());c.removeClass("select2-highlighted"),b>=c.length&&(b=c.length-1),b<0&&(b=0),a(c[b]).addClass("select2-highlighted"),this.ensureHighlightVisible(),this.opened()&&this.focusSearch()},highlightUnderEvent:function(b){var c=a(b.target).closest(".select2-result");c.length>0&&this.highlight(c.index())},loadMoreIfNeeded:function(){var c=this.results,d=c.find("li.select2-more-results"),e,f=-1,g=this.resultsPage+1;if(d.length===0)return;e=d.offset().top-c.offset().top-c.height(),e<=0&&(d.addClass("select2-active"),this.opts.query({term:this.search.val(),page:g,context:self.context,matcher:self.opts.matcher,callback:this.bind(function(e){var h=[],i=this;a(e.results).each(function(){h.push("<li class='select2-result'>"),h.push(i.opts.formatResult(this)),h.push("</li>")}),d.before(h.join("")),c.find(".select2-result").each(function(c){var d=a(this);d.data("select2-data")!==b?f=c:d.data("select2-data",e.results[c-f-1])}),e.more?d.removeClass("select2-active"):d.remove(),this.resultsPage=g})}))},updateResults:function(c){function i(a){e.html(a),e.scrollTop(0),d.removeClass("select2-active")}var d=this.search,e=this.results,f=this.opts,g=this;d.addClass("select2-active");if(d.val().length<f.minimumInputLength){i("<li class='select2-no-results'>"+f.formatInputTooShort(d.val(),f.minimumInputLength)+"</li>");return}this.resultsPage=1,f.query({term:d.val(),page:this.resultsPage,context:null,matcher:f.matcher,callback:this.bind(function(j){var k=[],l;this.opts.createSearchChoice&&d.val()!==""&&(l=this.opts.createSearchChoice.call(null,d.val(),j.results),l!==b&&l!==null&&g.id(l)!==b&&g.id(l)!==null&&a(j.results).filter(function(){return h(g.id(this),g.id(l))}).length===0&&j.results.unshift(l));if(j.results.length===0){i("<li class='select2-no-results'>"+f.formatNoMatches(d.val())+"</li>");return}a(j.results).each(function(){k.push("<li class='select2-result'>"),k.push(f.formatResult(this)),k.push("</li>")}),j.more===!0&&k.push("<li class='select2-more-results'>Loading more results...</li>"),i(k.join("")),e.children(".select2-result").each(function(b){var c=j.results[b];a(this).data("select2-data",c)}),this.postprocessResults(j,c)})})},cancel:function(){this.close()},blur:function(){window.setTimeout(this.bind(function(){this.close(),this.container.removeClass("select2-container-active"),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),this.search.blur()}),10)},focusSearch:function(){window.setTimeout(this.bind(function(){this.search.focus()}),10)},selectHighlighted:function(){var a=this.results.find(".select2-highlighted:not(.select2-disabled)").data("select2-data");a&&this.onSelect(a)},getPlaceholder:function(){return this.opts.element.attr("placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder},getContainerWidth:function(){var a,c,d,e,f;if(this.opts.width!==b)return this.opts.width;a=this.opts.element.attr("style");if(a!==b){c=a.split(";");for(e=0,f=c.length;e<f;e+=1){d=c[e].replace(/\s/g,"").match(/width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/);if(d!==null&&d.length>=1)return d[1]}}return this.opts.element.width()+"px"}}),e=t(d,{createContainer:function(){return a("<div></div>",{"class":"select2-container",style:"width: "+this.getContainerWidth()}).html(["    <a href='javascript:void(0)' class='select2-choice'>","   <span></span><abbr class='select2-search-choice-close' style='display:none;'></abbr>","   <div><b></b></div>","</a>","    <div class='select2-drop' style='display:none;'>","   <div class='select2-search'>","       <input type='text' autocomplete='off'/>","   </div>","   <ul class='select2-results'>","   </ul>","</div>"].join(""))},open:function(){if(this.opened())return;this.parent.open.apply(this,arguments)},close:function(){if(!this.opened())return;this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.selection.focus()},isFocused:function(){return this.selection.is(":focus")},cancel:function(){this.parent.cancel.apply(this,arguments),this.selection.focus()},initContainer:function(){var a,b=this.container,d=!1,e=".select2-choice";this.selection=a=b.find(e),this.search.bind("keydown",this.bind(function(a){switch(a.which){case c.UP:case c.DOWN:this.moveHighlight(a.which===c.UP?-1:1),o(a);return;case c.TAB:case c.ENTER:this.selectHighlighted(),o(a);return;case c.ESC:this.cancel(a),a.preventDefault();return}})),b.delegate(e,"click",this.bind(function(b){d=!0,this.opened()?(this.close(),a.focus()):this.enabled&&this.open(),b.preventDefault(),d=!1})),b.delegate(e,"keydown",this.bind(function(a){if(!this.enabled||a.which===c.TAB||c.isControl(a)||c.isFunctionKey(a)||a.which===c.ESC)return;this.open(),(a.which===c.PAGE_UP||a.which===c.PAGE_DOWN||a.which===c.SPACE)&&o(a),a.which===c.ENTER&&o(a)})),b.delegate(e,"focus",function(){this.enabled&&b.addClass("select2-container-active")}),b.delegate(e,"blur",this.bind(function(){if(d)return;this.opened()||this.blur()})),a.delegate("abbr","click",this.bind(function(a){if(!this.enabled)return;this.val(""),o(a),this.close(),this.triggerChange()})),this.setPlaceholder()},initSelection:function(){var a;this.opts.element.val()===""?this.updateSelection({id:"",text:""}):(a=this.opts.initSelection.call(null,this.opts.element),a!==b&&a!==null&&this.updateSelection(a)),this.close(),this.setPlaceholder()},prepareOpts:function(){var a=this.parent.prepareOpts.apply(this,arguments);return a.element.get(0).tagName.toLowerCase()==="select"&&(a.initSelection=function(a){var b=a.find(":selected");return{id:b.attr("value"),text:b.text()}}),a},setPlaceholder:function(){var a=this.getPlaceholder();if(this.opts.element.val()===""&&a!==b){if(this.select&&this.select.find("option:first").text()!=="")return;typeof a=="object"?this.updateSelection(a):this.selection.find("span").html(a),this.selection.addClass("select2-default"),this.selection.find("abbr").hide()}},postprocessResults:function(b,c){var d=0,e=this,f=!0;this.results.find(".select2-result").each(function(b){if(h(e.id(a(this).data("select2-data")),e.opts.element.val()))return d=b,!1}),this.highlight(d),c===!0&&(f=b.results.length>=this.opts.minimumResultsForSearch,this.search.parent().toggle(f),this.container[f?"addClass":"removeClass"]("select2-with-searchbox"))},onSelect:function(a){var b=this.opts.element.val();this.opts.element.val(this.id(a)),this.updateSelection(a),this.close(),this.selection.focus(),h(b,this.id(a))||this.triggerChange()},updateSelection:function(a){this.selection.find("span").html(this.opts.formatSelection(a)),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==b&&this.selection.find("abbr").show()},val:function(){var b,c=null;if(arguments.length===0)return this.opts.element.val();b=arguments[0],this.select?(this.select.val(b).find(":selected").each(function(){return c={id:a(this).attr("value"),text:a(this).text()},!1}),this.updateSelection(c)):(this.opts.element.val(b?this.id(b):""),this.updateSelection(b)),this.setPlaceholder()},clearSearch:function(){this.search.val("")}}),f=t(d,{createContainer:function(){return a("<div></div>",{"class":"select2-container select2-container-multi",style:"width: "+this.getContainerWidth()}).html(["    <ul class='select2-choices'>","  <li class='select2-search-field'>","    <input type='text' autocomplete='off' style='width: 25px;'>","  </li>","</ul>","<div class='select2-drop' style='display:none;'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""))},prepareOpts:function(){var b=this.parent.prepareOpts.apply(this,arguments);return b=a.extend({},{closeOnSelect:!0},b),b.element.get(0).tagName.toLowerCase()==="select"&&(b.initSelection=function(b){var c=[];return b.find(":selected").each(function(){c.push({id:a(this).attr("value"),text:a(this).text()})}),c}),b},initContainer:function(){var a=".select2-choices",b;this.searchContainer=this.container.find(".select2-search-field"),this.selection=b=this.container.find(a),this.search.bind("keydown",this.bind(function(a){if(!this.enabled)return;if(a.which===c.BACKSPACE&&this.search.val()===""){this.close();var d,e=b.find(".select2-search-choice-focus");if(e.length>0){this.unselect(e.first()),this.search.width(10),o(a);return}d=b.find(".select2-search-choice"),d.length>0&&d.last().addClass("select2-search-choice-focus")}else b.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus");if(this.opened())switch(a.which){case c.UP:case c.DOWN:this.moveHighlight(a.which===c.UP?-1:1),o(a);return;case c.ENTER:case c.TAB:this.selectHighlighted(),o(a);return;case c.ESC:this.cancel(a),a.preventDefault();return}if(a.which===c.TAB||c.isControl(a)||c.isFunctionKey(a)||a.which===c.BACKSPACE||a.which===c.ESC)return;this.open(),(a.which===c.PAGE_UP||a.which===c.PAGE_DOWN)&&o(a)})),this.search.bind("keyup",this.bind(this.resizeSearch)),this.container.delegate(a,"click",this.bind(function(a){if(!this.enabled)return;this.open(),this.focusSearch(),a.preventDefault()})),this.container.delegate(a,"focus",this.bind(function(){if(!this.enabled)return;this.container.addClass("select2-container-active"),this.clearPlaceholder()})),this.clearSearch()},enable:function(){if(this.enabled)return;this.parent.enable.apply(this,arguments),this.search.show()},disable:function(){if(!this.enabled)return;this.parent.disable.apply(this,arguments),this.search.hide()},initSelection:function(){var a;this.opts.element.val()===""&&this.updateSelection([]);if(this.select||this.opts.element.val()!=="")a=this.opts.initSelection.call(null,this.opts.element),a!==b&&a!==null&&this.updateSelection(a);this.close(),this.clearSearch()},clearSearch:function(){var a=this.getPlaceholder();a!==b&&this.getVal().length===0&&this.search.hasClass("select2-focused")===!1?(this.search.val(a).addClass("select2-default"),this.search.width(this.getContainerWidth())):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},open:function(){if(this.opened())return;this.parent.open.apply(this,arguments),this.resizeSearch(),this.focusSearch()},close:function(){if(!this.opened())return;this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(b){var c=[],d=[],e=this;a(b).each(function(){g(e.id(this),c)<0&&(c.push(e.id(this)),d.push(this))}),b=d,this.selection.find(".select2-search-choice").remove(),a(b).each(function(){e.addSelectedChoice(this)}),e.postprocessResults()},onSelect:function(a){this.addSelectedChoice(a),this.select&&this.postprocessResults(),this.opts.closeOnSelect?(this.close(),this.search.width(10)):(this.search.width(10),this.resizeSearch()),this.triggerChange(),this.focusSearch()},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(b){var c,d=this.id(b),e,f=this.getVal();e=["<li class='select2-search-choice'>",this.opts.formatSelection(b),"<a href='javascript:void(0)' class='select2-search-choice-close' tabindex='-1'></a>","</li>"],c=a(e.join("")),c.find("a").bind("click dblclick",this.bind(function(b){if(!this.enabled)return;this.unselect(a(b.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),o(b),this.close(),this.focusSearch()})).bind("focus",this.bind(function(){if(!this.enabled)return;this.container.addClass("select2-container-active")})),c.data("select2-data",b),c.insertBefore(this.searchContainer),f.push(d),this.setVal(f)},unselect:function(a){var b=this.getVal(),c;a=a.closest(".select2-search-choice");if(a.length===0)throw"Invalid argument: "+a+". Must be .select2-search-choice";c=g(this.id(a.data("select2-data")),b),c>=0&&(b.splice(c,1),this.setVal(b),this.select&&this.postprocessResults()),a.remove(),this.triggerChange()},postprocessResults:function(){var b=this.getVal(),c=this.results.find(".select2-result"),d=this;c.each(function(){var c=a(this),e=d.id(c.data("select2-data"));g(e,b)>=0?c.addClass("select2-disabled"):c.removeClass("select2-disabled")}),c.each(function(b){if(!a(this).hasClass("select2-disabled"))return d.highlight(b),!1})},resizeSearch:function(){var a,b,c,d,e;a=p(this.search)+10,b=this.search.offset().left,c=this.selection.width(),d=this.selection.offset().left,e=c-(b-d)-j(this.search),e<a&&(e=c-j(this.search)),e<40&&(e=c-j(this.search)),this.search.width(e)},getVal:function(){var a;return this.select?(a=this.select.val(),a===null?[]:a):(a=this.opts.element.val(),i(a,","))},setVal:function(b){var c;this.select?this.select.val(b):(c=[],a(b).each(function(){g(this,c)<0&&c.push(this)}),this.opts.element.val(c.length===0?"":c.join(",")))},val:function(){var b,c=[],d=this;if(arguments.length===0)return this.getVal();b=arguments[0],this.select?(this.setVal(b),this.select.find(":selected").each(function(){c.push({id:a(this).attr("value"),text:a(this).text()})}),this.updateSelection(c)):(b=b===null?[]:b,this.setVal(b),st,a(b).each(function(){c.push(d.id(this))}),this.setVal(c),this.updateSelection(b)),this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var b=[],c=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each(function(){b.push(c.opts.id(a(this).data("select2-data")))}),this.setVal(b),this.triggerChange()}}),a.fn.select2=function(){var c=Array.prototype.slice.call(arguments,0),d,h,i,j,k=["val","destroy","open","close","focus","isFocused","container","onSortStart","onSortEnd","enable","disable"];return this.each(function(){if(c.length===0||typeof c[0]=="object")d=c.length===0?{}:a.extend({},c[0]),d.element=a(this),d.element.get(0).tagName.toLowerCase()==="select"?j=d.element.attr("multiple"):(j=d.multiple||!1,"tags"in d&&(d.multiple=j=!0)),h=j?new f:new e,h.init(d);else{if(typeof c[0]!="string")throw"Invalid arguments to select2 plugin: "+c;if(g(c[0],k)<0)throw"Unknown method: "+c[0];i=b,h=a(this).data("select2");if(h===b)return;c[0]==="container"?i=h.container:i=h[c[0]].apply(h,c.slice(1));if(i!==b)return!1}}),i===b?this:i},window.Select2={query:{ajax:q,local:r,tags:s},util:{debounce:m},"class":{"abstract":d,single:e,multi:f}}})(jQuery);